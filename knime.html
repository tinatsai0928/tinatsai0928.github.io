<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Movie Review Sentiment Analysis &amp; AI Chatbot ‚Äì My Website</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-dfb324f25d9b1687192fa8be62ac8f9c.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">My Website</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./project.html"> 
<span class="menu-text">Project Experience</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Certificate.qmd"> 
<span class="menu-text">Certificate</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./volunteer.html"> 
<span class="menu-text">volunteer Experience</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./resume.html"> 
<span class="menu-text">My Resume</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#project-executive-summary" id="toc-project-executive-summary" class="nav-link active" data-scroll-target="#project-executive-summary">üìå Project Executive Summary</a></li>
  <li><a href="#technical-methodology" id="toc-technical-methodology" class="nav-link" data-scroll-target="#technical-methodology">üõ†Ô∏è Technical Methodology</a>
  <ul class="collapse">
  <li><a href="#sentiment-classification" id="toc-sentiment-classification" class="nav-link" data-scroll-target="#sentiment-classification"><strong>Sentiment Classification</strong></a></li>
  <li><a href="#genai-integration" id="toc-genai-integration" class="nav-link" data-scroll-target="#genai-integration"><strong>GenAI Integration</strong></a></li>
  </ul></li>
  <li><a href="#visual-insights-workflow" id="toc-visual-insights-workflow" class="nav-link" data-scroll-target="#visual-insights-workflow">üìä Visual Insights &amp; Workflow</a>
  <ul class="collapse">
  <li><a href="#data-preprocessing" id="toc-data-preprocessing" class="nav-link" data-scroll-target="#data-preprocessing"><strong>1. Data Preprocessing</strong></a></li>
  <li><a href="#strategic-market-insights" id="toc-strategic-market-insights" class="nav-link" data-scroll-target="#strategic-market-insights"><strong>2. Strategic Market Insights</strong></a></li>
  <li><a href="#model-optimization" id="toc-model-optimization" class="nav-link" data-scroll-target="#model-optimization"><strong>3. Model Optimization</strong></a></li>
  </ul></li>
  <li><a href="#reflection-future-scope" id="toc-reflection-future-scope" class="nav-link" data-scroll-target="#reflection-future-scope">üí° Reflection &amp; Future Scope</a>
  <ul class="collapse">
  <li><a href="#the-challenge" id="toc-the-challenge" class="nav-link" data-scroll-target="#the-challenge"><strong>The Challenge</strong></a></li>
  <li><a href="#future-scope" id="toc-future-scope" class="nav-link" data-scroll-target="#future-scope"><strong>Future Scope</strong></a></li>
  <li><a href="#strategic-insight" id="toc-strategic-insight" class="nav-link" data-scroll-target="#strategic-insight"><strong>Strategic Insight</strong></a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Movie Review Sentiment Analysis &amp; AI Chatbot</h1>
<p class="subtitle lead">Bridging Natural Language Processing with Generative AI</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="project-executive-summary" class="level2">
<h2 class="anchored" data-anchor-id="project-executive-summary">üìå Project Executive Summary</h2>
<p>In today‚Äôs information-rich landscape, consumer reviews are essential for gauging a movie‚Äôs commercial success.<br>
This project features an automated analytical pipeline that employs text mining and sentiment analysis to pinpoint key success drivers.<br>
To enhance user engagement, I integrated Generative AI to build an interactive interface that delivers real-time, data-backed insights into audience evaluations.</p>
<hr>
</section>
<section id="technical-methodology" class="level2">
<h2 class="anchored" data-anchor-id="technical-methodology">üõ†Ô∏è Technical Methodology</h2>
<p>I utilized <strong>KNIME</strong> to design a robust ETL (Extract, Transform, Load) and text mining pipeline.</p>
<ul>
<li><strong>Volume</strong>: Processed and refined a balanced dataset of <strong>2,000 movie reviews</strong>.</li>
<li><strong>Pre-processing</strong>: Implemented <strong>TF-IDF</strong> weighting alongside tokenization and stemming to filter linguistic noise and isolate high-impact sentiment descriptors.</li>
<li><strong>Theme Extraction</strong>: Performed <strong>Word Cloud Analysis</strong> to identify the 4 most prominent market themes driving user reviews.</li>
</ul>
<section id="sentiment-classification" class="level3">
<h3 class="anchored" data-anchor-id="sentiment-classification"><strong>Sentiment Classification</strong></h3>
<ul>
<li><strong>Goal</strong>: Develop a predictive pipeline to categorize audience sentiment, supporting data-driven brand perception analysis.</li>
<li><strong>Model Performance</strong>: Evaluated multiple classifiers (Naive Bayes, Logistic Regression, Random Forest), with the Decision Tree model achieving a peak accuracy of 68.1%.</li>
</ul>
</section>
<section id="genai-integration" class="level3">
<h3 class="anchored" data-anchor-id="genai-integration"><strong>GenAI Integration</strong></h3>
<ul>
<li><strong>The Chatbot</strong>: Integrated <strong>Generative AI</strong> to build an interactive chatbot capable of answering complex user queries about movie evaluations.</li>
<li><strong>Impact</strong>: Demonstrated the transition from static sentiment classification to generative insight extraction, showcasing the future of automated customer intelligence.</li>
</ul>
<hr>
</section>
</section>
<section id="visual-insights-workflow" class="level2">
<h2 class="anchored" data-anchor-id="visual-insights-workflow">üìä Visual Insights &amp; Workflow</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="KNIME.png" class="img-fluid figure-img"></p>
<figcaption>KNIME Workflow Screenshot</figcaption>
</figure>
</div>
<section id="data-preprocessing" class="level3">
<h3 class="anchored" data-anchor-id="data-preprocessing"><strong>1. Data Preprocessing</strong></h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="DataClean.png" class="img-fluid figure-img"></p>
<figcaption>Data Preprocessing Screenshot</figcaption>
</figure>
</div>
<p>To transform 2,000 raw movie reviews into a structured format suitable for modeling, I developed a rigorous text-preprocessing pipeline in KNIME.<br>
This process began with foundational data cleansing to address missing values and duplicates, followed by advanced NLP techniques to minimize linguistic noise.<br>
By implementing <strong>Punctuation Erasure, Case Conversion, and Stop Word Filtering</strong>, I successfully standardized the text and eliminated non-essential vocabulary.<br>
The final refinement involved <strong>Snowball Stemming</strong> to harmonize word variations, ensuring the model could capture core sentiments regardless of tense or syntax.<br>
This comprehensive preparation resulted in a highly balanced dataset, providing a robust and bias-free foundation for the subsequent sentiment analysis.</p>
</section>
<section id="strategic-market-insights" class="level3">
<h3 class="anchored" data-anchor-id="strategic-market-insights"><strong>2. Strategic Market Insights</strong></h3>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">üìä Topic Distribution</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">‚òÅÔ∏è Topic Word Clouds</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Theme-BarChart.png" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption>Theme Distribution Bar Chart</figcaption>
</figure>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="WordCloud.png" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption>Word Clouds for Movie Themes</figcaption>
</figure>
</div>
</div>
</div>
</div>
<p>By implementing Latent Dirichlet Allocation (LDA) for topic modeling, I extracted three distinct market themes from the review data to inform content investment strategies.<br>
The analysis identified <strong>Horror Movies as a high-value category</strong> due to strong audience engagement with thrilling and realistic content.<br>
Additionally, the findings highlighted that <strong>Cast and Music are decisive factors</strong> influencing viewer satisfaction and subscription retention.<br>
While genres such as War Dramas represented a smaller segment, the data suggested a niche but loyal audience for high-quality production in this area.<br>
<strong>These strategic insights enable streaming platforms to optimize production budgets and refine recommendation algorithms, leveraging data to replicate the success of audience-centric hits such as Stranger Things.‚Äù</strong></p>
</section>
<section id="model-optimization" class="level3">
<h3 class="anchored" data-anchor-id="model-optimization"><strong>3. Model Optimization</strong></h3>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">üöó Logistics Regression</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">üå≥Random Forest</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false">üå≤ Decision Tree</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-4" role="tab" aria-controls="tabset-2-4" aria-selected="false">ü™¥ Naive Bayes</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="LR.png" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption>Theme Distribution Bar Chart</figcaption>
</figure>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="RF.png" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption>Theme Distribution Bar Chart</figcaption>
</figure>
</div>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="DT.png" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption>Theme Distribution Bar Chart</figcaption>
</figure>
</div>
</div>
<div id="tabset-2-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-4-tab">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="NB.png" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption>Theme Distribution Bar Chart</figcaption>
</figure>
</div>
</div>
</div>
</div>
<p>A comparative analysis of model metrics reveals significant variations in how different algorithms capture sentiment nuances. While the <strong>Decision Tree maintained a balanced performance across both classes</strong>, other models such as <strong>Logistic Regression and Naive Bayes exhibited a strong bias toward negative sentiment</strong>, as evidenced by their high recall for ‚ÄòNEG‚Äô but disproportionately low recall for ‚ÄòPOS‚Äô.<br>
This discrepancy suggests that linear and probabilistic classifiers struggled to identify the complex linguistic patterns associated with positive feedback in the dataset.<br>
In contrast, <strong>the Random Forest and Decision Tree models achieved much higher F-measures for positive reviews</strong>, demonstrating their superior ability to handle the non-linear features and varied vocabulary found in movie critiques.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Accuracy.png" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption>Model Accuracy Bar Chart</figcaption>
</figure>
</div>
<p>To identify the most reliable classifier for movie sentiment, I benchmarked four distinct algorithms including Decision Tree, Random Forest, Logistic Regression, and Naive Bayes.<br>
As illustrated in the accuracy comparison chart, the <strong>Decision Tree model emerged as the top performer with a leading accuracy of 68.1%</strong>, demonstrating superior adaptability to the unstructured nature of movie reviews.<br>
A deeper look into the class-level metrics reveals that the Decision Tree achieved a remarkable equilibrium by maintaining an F-measure of approximately 0.68 for both positive and negative categories.<br>
In contrast, models such as Logistic Regression and Naive Bayes showed a significant bias toward negative sentiment, evidenced by their exceptionally low recall for positive reviews.<br>
This discrepancy suggests that while linear and probabilistic classifiers struggled to capture the nuanced vocabulary of favorable critiques, the tree-based approach effectively handled the non-linear features and varied vocabulary found in the dataset. By selecting the Decision Tree, I ensured a balanced predictive capability that accurately identifies both audience hits and critical failures without favoring a single sentiment class.</p>
<hr>
</section>
</section>
<section id="reflection-future-scope" class="level2">
<h2 class="anchored" data-anchor-id="reflection-future-scope">üí° Reflection &amp; Future Scope</h2>
<section id="the-challenge" class="level3">
<h3 class="anchored" data-anchor-id="the-challenge"><strong>The Challenge</strong></h3>
<p>The primary technical hurdle in this project was navigating the inherent subjectivity and nuanced language within the dataset. A significant source of potential error arose from <strong>the discrepancy between overall ratings and specific textual expressions</strong>; for instance, a reviewer might praise a film‚Äôs technical aspects while giving a low overall score, or vice-versa. This mismatch creates ‚Äúnoise‚Äù in the data labels, directly impacting the model‚Äôs ability to learn consistent sentiment patterns.<br>
While achieving a 68.1% accuracy with the Decision Tree provided a strong baseline, these results underscore the limitations of traditional machine learning in reconciling contradictory signals within a single review.</p>
</section>
<section id="future-scope" class="level3">
<h3 class="anchored" data-anchor-id="future-scope"><strong>Future Scope</strong></h3>
<p>To transcend the performance ceiling caused by label ambiguity, the next phase of this research involves integrating <strong>Large Language Models (LLMs)</strong> through the <strong>OpenAI API</strong>.<br>
Unlike standard classifiers, generative AI can perform <strong>aspect-based sentiment analysis</strong>, allowing it to separate conflicting opinions within the same text. Although initial experiments were constrained by API latency, leveraging these models for more sophisticated emotional detection remains a key objective. Future iterations will focus on scaling the dataset and utilizing transformer-based architectures to track sentiment evolution, providing more dynamic intelligence for content investment strategies.</p>
</section>
<section id="strategic-insight" class="level3">
<h3 class="anchored" data-anchor-id="strategic-insight"><strong>Strategic Insight</strong></h3>
<p>This project reinforces the principle that data is a narrative tool rather than just a collection of metrics.<br>
By bridging analytical rigor with market curiosity, I demonstrated how raw text can be converted into a blueprint for data-driven decision-making.<br>
These insights allow streaming platforms to optimize production budgets and refine recommendation algorithms to align with specific viewer preferences‚Äîensuring that content strategies are as compelling as the stories they aim to tell.</p>
<hr>
<p><a href="./project.html" class="btn btn-outline-secondary" role="button">‚Üê Back to Projects</a></p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p><small> Icons: <a href="https://www.flaticon.com/free-icons/travel" title="travel icons">Travel</a>, <a href="https://www.flaticon.com/free-icons/reading" title="reading icons">Reading</a>, <a href="https://www.flaticon.com/free-icons/analysis" title="analysis icons">Analysis</a> (Flaticon). </small></p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>